{"traceId":"0bee2b52dda975cae1bc306f4a7c14ec","spans":{"09fcbb1976d7d7b7":{"spanId":"09fcbb1976d7d7b7","traceId":"0bee2b52dda975cae1bc306f4a7c14ec","parentSpanId":"218d2514a494399e","startTime":1743617738201,"endTime":1743617739703.3237,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"model","genkit:name":"vertexai/gemini-1.5-flash","genkit:path":"/{customRecipeFlow,t:flow}/{generate,t:util}/{vertexai/gemini-1.5-flash,t:action,s:model}","genkit:input":"{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"You are given an original recipe with ingredients and directions. Your task is to modify the recipe to fit the user's available ingredients while keeping the dish as close to the original as possible.\\n\\n                Original Recipe:\\n\\n                Title: banana\\n                Ingredients: \\n                Directions: \\n\\n                User's Available Ingredients: \\n\\n                Requirements:\\n                - **Remove** ingredients that the user doesn't have, except for the basic ingredients such as oil or salt.\\n                - Suggest reasonable substitutions for missing ingredients.\\n                - Adjust the cooking steps accordingly.\\n                - Maintain the essence of the dish.\\n\\n                Output format:\\n                - title: string, the modified recipe's name\\n                - ingredients: string, List of new ingredients based on the user's available items\\n                - directions: string, Modified step-by-step instructions\"}]}],\"config\":{},\"tools\":[],\"output\":{}}","genkit:output":"{\"candidates\":[{\"index\":0,\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"Please provide me with the original recipe's ingredients and directions, along with the user's available ingredients. I need this information to modify the recipe accordingly. \\n\"}]},\"finishReason\":\"stop\",\"custom\":{\"safetyRatings\":[{\"category\":\"HARM_CATEGORY_HATE_SPEECH\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.07080078,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.10839844},{\"category\":\"HARM_CATEGORY_DANGEROUS_CONTENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.08642578,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.07714844},{\"category\":\"HARM_CATEGORY_HARASSMENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.072753906,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.048095703},{\"category\":\"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.064453125,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.07373047}]}}],\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"Please provide me with the original recipe's ingredients and directions, along with the user's available ingredients. I need this information to modify the recipe accordingly. \\n\"}]},\"finishReason\":\"STOP\",\"safetyRatings\":[{\"category\":\"HARM_CATEGORY_HATE_SPEECH\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.07080078,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.10839844},{\"category\":\"HARM_CATEGORY_DANGEROUS_CONTENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.08642578,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.07714844},{\"category\":\"HARM_CATEGORY_HARASSMENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.072753906,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.048095703},{\"category\":\"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.064453125,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.07373047}],\"avgLogprobs\":-0.15275869649999282,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":177,\"candidatesTokenCount\":34,\"totalTokenCount\":211,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":177}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":34}]},\"modelVersion\":\"gemini-1.5-flash-001\",\"createTime\":\"2025-04-02T18:15:42.021754Z\",\"responseId\":\"zn7tZ_qpAYLB-O4PkZf2gA4\"},\"usage\":{\"inputCharacters\":974,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":177,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":177,\"outputTokens\":34,\"totalTokens\":211},\"latencyMs\":1501.5130999999997}","genkit:state":"success"},"displayName":"vertexai/gemini-1.5-flash","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"218d2514a494399e":{"spanId":"218d2514a494399e","traceId":"0bee2b52dda975cae1bc306f4a7c14ec","parentSpanId":"91d53081336feb96","startTime":1743617738142,"endTime":1743617739756.1287,"attributes":{"genkit:type":"util","genkit:name":"generate","genkit:path":"/{customRecipeFlow,t:flow}/{generate,t:util}","genkit:input":"{\"model\":\"vertexai/gemini-1.5-flash\",\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"You are given an original recipe with ingredients and directions. Your task is to modify the recipe to fit the user's available ingredients while keeping the dish as close to the original as possible.\\n\\n                Original Recipe:\\n\\n                Title: banana\\n                Ingredients: \\n                Directions: \\n\\n                User's Available Ingredients: \\n\\n                Requirements:\\n                - **Remove** ingredients that the user doesn't have, except for the basic ingredients such as oil or salt.\\n                - Suggest reasonable substitutions for missing ingredients.\\n                - Adjust the cooking steps accordingly.\\n                - Maintain the essence of the dish.\\n\\n                Output format:\\n                - title: string, the modified recipe's name\\n                - ingredients: string, List of new ingredients based on the user's available items\\n                - directions: string, Modified step-by-step instructions\"}]}],\"config\":{}}","genkit:output":"{\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"Please provide me with the original recipe's ingredients and directions, along with the user's available ingredients. I need this information to modify the recipe accordingly. \\n\"}]},\"finishReason\":\"stop\",\"usage\":{\"inputCharacters\":974,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":177,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":177,\"outputTokens\":34,\"totalTokens\":211},\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"Please provide me with the original recipe's ingredients and directions, along with the user's available ingredients. I need this information to modify the recipe accordingly. \\n\"}]},\"finishReason\":\"STOP\",\"safetyRatings\":[{\"category\":\"HARM_CATEGORY_HATE_SPEECH\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.07080078,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.10839844},{\"category\":\"HARM_CATEGORY_DANGEROUS_CONTENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.08642578,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.07714844},{\"category\":\"HARM_CATEGORY_HARASSMENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.072753906,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.048095703},{\"category\":\"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.064453125,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.07373047}],\"avgLogprobs\":-0.15275869649999282,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":177,\"candidatesTokenCount\":34,\"totalTokenCount\":211,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":177}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":34}]},\"modelVersion\":\"gemini-1.5-flash-001\",\"createTime\":\"2025-04-02T18:15:42.021754Z\",\"responseId\":\"zn7tZ_qpAYLB-O4PkZf2gA4\"},\"request\":{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"You are given an original recipe with ingredients and directions. Your task is to modify the recipe to fit the user's available ingredients while keeping the dish as close to the original as possible.\\n\\n                Original Recipe:\\n\\n                Title: banana\\n                Ingredients: \\n                Directions: \\n\\n                User's Available Ingredients: \\n\\n                Requirements:\\n                - **Remove** ingredients that the user doesn't have, except for the basic ingredients such as oil or salt.\\n                - Suggest reasonable substitutions for missing ingredients.\\n                - Adjust the cooking steps accordingly.\\n                - Maintain the essence of the dish.\\n\\n                Output format:\\n                - title: string, the modified recipe's name\\n                - ingredients: string, List of new ingredients based on the user's available items\\n                - directions: string, Modified step-by-step instructions\"}]}],\"config\":{},\"tools\":[],\"output\":{}}}","genkit:state":"success"},"displayName":"generate","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"91d53081336feb96":{"spanId":"91d53081336feb96","traceId":"0bee2b52dda975cae1bc306f4a7c14ec","startTime":1743617738131,"endTime":1743617739760.1648,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"flow","genkit:name":"customRecipeFlow","genkit:isRoot":true,"genkit:path":"/{customRecipeFlow,t:flow}","genkit:metadata:context":"{}","genkit:input":"{\"suggestRecipe\":{\"title\":\"banana\",\"ingredients\":\"\",\"directions\":\"\",\"ingredient_embedding\":{}},\"ingredients\":\"\"}","genkit:state":"error"},"displayName":"customRecipeFlow","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"Cannot read properties of null (reading 'title')"},"timeEvents":{"timeEvent":[{"time":1743617739760.0957,"annotation":{"attributes":{"exception.type":"TypeError","exception.message":"Cannot read properties of null (reading 'title')","exception.stacktrace":"TypeError: Cannot read properties of null (reading 'title')\n    at <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\src\\flow\\customRecipe.ts:94:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\flow.ts:124:14)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\action.ts:426:14)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\action.ts:322:26)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\tracing\\instrumentation.ts:73:16)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\tracing\\instrumentation.ts:115:24)\n    at async runInNewSpan (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\tracing\\instrumentation.ts:103:10)\n    at async newTrace (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\tracing\\instrumentation.ts:62:10)\n    at async AsyncFunction.actionFn.run (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\action.ts:289:18)"},"description":"exception"}}]}}},"displayName":"customRecipeFlow","startTime":1743617738131,"endTime":1743617739760.1648}