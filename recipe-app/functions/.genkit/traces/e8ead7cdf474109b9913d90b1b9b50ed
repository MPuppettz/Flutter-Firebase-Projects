{"traceId":"e8ead7cdf474109b9913d90b1b9b50ed","spans":{"b198b46666f71d99":{"spanId":"b198b46666f71d99","traceId":"e8ead7cdf474109b9913d90b1b9b50ed","parentSpanId":"5f6b1058515c1e18","startTime":1743618117622,"endTime":1743618117641.1094,"attributes":{"genkit:type":"flowStep","genkit:name":"Retrieve matching ingredients","genkit:path":"/{customRecipeFlow,t:flow}/{Retrieve matching ingredients,t:flowStep}","genkit:output":"[]","genkit:state":"success"},"displayName":"Retrieve matching ingredients","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"7b43bb3f27d8b3a4":{"spanId":"7b43bb3f27d8b3a4","traceId":"e8ead7cdf474109b9913d90b1b9b50ed","parentSpanId":"6a75a57a8ecdaf04","startTime":1743618117791,"endTime":1743618120326.169,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"model","genkit:name":"vertexai/gemini-1.5-flash","genkit:path":"/{customRecipeFlow,t:flow}/{generate,t:util}/{vertexai/gemini-1.5-flash,t:action,s:model}","genkit:input":"{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"You are given an original recipe with ingredients and directions. Your task is to modify the recipe to fit the user's available ingredients while keeping the dish as close to the original as possible.\\n\\n                Original Recipe:\\n\\n                Title: \\n                Ingredients: \\n                Directions: \\n\\n                User's Available Ingredients: [object Object]\\n\\n                Requirements:\\n                - **Remove** ingredients that the user doesn't have, except for the basic ingredients such as oil or salt.\\n                - Suggest reasonable substitutions for missing ingredients.\\n                - Adjust the cooking steps accordingly.\\n                - Maintain the essence of the dish.\\n\\n                Output format:\\n                - title: string, the modified recipe's name\\n                - ingredients: string, List of new ingredients based on the user's available items\\n                - directions: string, Modified step-by-step instructions\"}]}],\"config\":{},\"tools\":[],\"output\":{}}","genkit:output":"{\"candidates\":[{\"index\":0,\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"Please provide me with the original recipe, the user's available ingredients, and the name of the dish. I will then modify the recipe based on the user's available ingredients and provide you with the output in the requested format. \\n\\nFor example, you could give me the following:\\n\\n**Original Recipe:**\\n\\n**Title:**  Spaghetti with Tomato Sauce\\n\\n**Ingredients:**\\n* 1 pound spaghetti\\n* 1 (28 ounce) can crushed tomatoes\\n* 1 onion, chopped\\n* 2 cloves garlic, minced\\n* 1 tablespoon olive oil\\n* 1 teaspoon dried oregano\\n* 1/2 teaspoon salt\\n* 1/4 teaspoon black pepper\\n\\n**Directions:**\\n1. Cook spaghetti according to package directions.\\n2. While spaghetti is cooking, heat olive oil in a large skillet over medium heat.\\n3. Add onion and garlic and cook until softened, about 5 minutes.\\n4. Stir in crushed tomatoes, oregano, salt, and pepper.\\n5. Bring to a simmer and cook for 15 minutes, stirring occasionally.\\n6. Drain spaghetti and add to the sauce.\\n7. Toss to coat and serve.\\n\\n**User's Available Ingredients:**\\n\\n* 1 pound spaghetti\\n* 1 (28 ounce) can crushed tomatoes\\n* 2 cloves garlic\\n* 1/2 teaspoon salt\\n* 1/4 teaspoon black pepper\\n* 1 tablespoon butter\\n\\nI will then provide you with the modified recipe in the requested format. \\n\"}]},\"finishReason\":\"stop\",\"custom\":{\"safetyRatings\":[{\"category\":\"HARM_CATEGORY_HATE_SPEECH\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.12988281,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.16796875},{\"category\":\"HARM_CATEGORY_DANGEROUS_CONTENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.22265625,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.15234375},{\"category\":\"HARM_CATEGORY_HARASSMENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.18261719,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.091308594},{\"category\":\"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.22558594,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.115722656}],\"citationMetadata\":{\"citations\":[{\"startIndex\":429,\"endIndex\":560,\"uri\":\"https://www.thefiwy.com/how-to-make-spinach-puffs-kronk-recipe/\"}]}}}],\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"Please provide me with the original recipe, the user's available ingredients, and the name of the dish. I will then modify the recipe based on the user's available ingredients and provide you with the output in the requested format. \\n\\nFor example, you could give me the following:\\n\\n**Original Recipe:**\\n\\n**Title:**  Spaghetti with Tomato Sauce\\n\\n**Ingredients:**\\n* 1 pound spaghetti\\n* 1 (28 ounce) can crushed tomatoes\\n* 1 onion, chopped\\n* 2 cloves garlic, minced\\n* 1 tablespoon olive oil\\n* 1 teaspoon dried oregano\\n* 1/2 teaspoon salt\\n* 1/4 teaspoon black pepper\\n\\n**Directions:**\\n1. Cook spaghetti according to package directions.\\n2. While spaghetti is cooking, heat olive oil in a large skillet over medium heat.\\n3. Add onion and garlic and cook until softened, about 5 minutes.\\n4. Stir in crushed tomatoes, oregano, salt, and pepper.\\n5. Bring to a simmer and cook for 15 minutes, stirring occasionally.\\n6. Drain spaghetti and add to the sauce.\\n7. Toss to coat and serve.\\n\\n**User's Available Ingredients:**\\n\\n* 1 pound spaghetti\\n* 1 (28 ounce) can crushed tomatoes\\n* 2 cloves garlic\\n* 1/2 teaspoon salt\\n* 1/4 teaspoon black pepper\\n* 1 tablespoon butter\\n\\nI will then provide you with the modified recipe in the requested format. \\n\"}]},\"finishReason\":\"STOP\",\"safetyRatings\":[{\"category\":\"HARM_CATEGORY_HATE_SPEECH\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.12988281,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.16796875},{\"category\":\"HARM_CATEGORY_DANGEROUS_CONTENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.22265625,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.15234375},{\"category\":\"HARM_CATEGORY_HARASSMENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.18261719,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.091308594},{\"category\":\"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.22558594,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.115722656}],\"citationMetadata\":{\"citations\":[{\"startIndex\":429,\"endIndex\":560,\"uri\":\"https://www.thefiwy.com/how-to-make-spinach-puffs-kronk-recipe/\"}]},\"avgLogprobs\":-0.14531766915623145,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":180,\"candidatesTokenCount\":316,\"totalTokenCount\":496,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":180}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":316}]},\"modelVersion\":\"gemini-1.5-flash-001\",\"createTime\":\"2025-04-02T18:22:01.646781Z\",\"responseId\":\"SYDtZ_28J4LB-O4PkZf2gA4\"},\"usage\":{\"inputCharacters\":983,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":1229,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":180,\"outputTokens\":316,\"totalTokens\":496},\"latencyMs\":2534.7189}","genkit:state":"success"},"displayName":"vertexai/gemini-1.5-flash","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"6a75a57a8ecdaf04":{"spanId":"6a75a57a8ecdaf04","traceId":"e8ead7cdf474109b9913d90b1b9b50ed","parentSpanId":"5f6b1058515c1e18","startTime":1743618117708,"endTime":1743618120374.684,"attributes":{"genkit:type":"util","genkit:name":"generate","genkit:path":"/{customRecipeFlow,t:flow}/{generate,t:util}","genkit:input":"{\"model\":\"vertexai/gemini-1.5-flash\",\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"You are given an original recipe with ingredients and directions. Your task is to modify the recipe to fit the user's available ingredients while keeping the dish as close to the original as possible.\\n\\n                Original Recipe:\\n\\n                Title: \\n                Ingredients: \\n                Directions: \\n\\n                User's Available Ingredients: [object Object]\\n\\n                Requirements:\\n                - **Remove** ingredients that the user doesn't have, except for the basic ingredients such as oil or salt.\\n                - Suggest reasonable substitutions for missing ingredients.\\n                - Adjust the cooking steps accordingly.\\n                - Maintain the essence of the dish.\\n\\n                Output format:\\n                - title: string, the modified recipe's name\\n                - ingredients: string, List of new ingredients based on the user's available items\\n                - directions: string, Modified step-by-step instructions\"}]}],\"config\":{}}","genkit:output":"{\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"Please provide me with the original recipe, the user's available ingredients, and the name of the dish. I will then modify the recipe based on the user's available ingredients and provide you with the output in the requested format. \\n\\nFor example, you could give me the following:\\n\\n**Original Recipe:**\\n\\n**Title:**  Spaghetti with Tomato Sauce\\n\\n**Ingredients:**\\n* 1 pound spaghetti\\n* 1 (28 ounce) can crushed tomatoes\\n* 1 onion, chopped\\n* 2 cloves garlic, minced\\n* 1 tablespoon olive oil\\n* 1 teaspoon dried oregano\\n* 1/2 teaspoon salt\\n* 1/4 teaspoon black pepper\\n\\n**Directions:**\\n1. Cook spaghetti according to package directions.\\n2. While spaghetti is cooking, heat olive oil in a large skillet over medium heat.\\n3. Add onion and garlic and cook until softened, about 5 minutes.\\n4. Stir in crushed tomatoes, oregano, salt, and pepper.\\n5. Bring to a simmer and cook for 15 minutes, stirring occasionally.\\n6. Drain spaghetti and add to the sauce.\\n7. Toss to coat and serve.\\n\\n**User's Available Ingredients:**\\n\\n* 1 pound spaghetti\\n* 1 (28 ounce) can crushed tomatoes\\n* 2 cloves garlic\\n* 1/2 teaspoon salt\\n* 1/4 teaspoon black pepper\\n* 1 tablespoon butter\\n\\nI will then provide you with the modified recipe in the requested format. \\n\"}]},\"finishReason\":\"stop\",\"usage\":{\"inputCharacters\":983,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":1229,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":180,\"outputTokens\":316,\"totalTokens\":496},\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"Please provide me with the original recipe, the user's available ingredients, and the name of the dish. I will then modify the recipe based on the user's available ingredients and provide you with the output in the requested format. \\n\\nFor example, you could give me the following:\\n\\n**Original Recipe:**\\n\\n**Title:**  Spaghetti with Tomato Sauce\\n\\n**Ingredients:**\\n* 1 pound spaghetti\\n* 1 (28 ounce) can crushed tomatoes\\n* 1 onion, chopped\\n* 2 cloves garlic, minced\\n* 1 tablespoon olive oil\\n* 1 teaspoon dried oregano\\n* 1/2 teaspoon salt\\n* 1/4 teaspoon black pepper\\n\\n**Directions:**\\n1. Cook spaghetti according to package directions.\\n2. While spaghetti is cooking, heat olive oil in a large skillet over medium heat.\\n3. Add onion and garlic and cook until softened, about 5 minutes.\\n4. Stir in crushed tomatoes, oregano, salt, and pepper.\\n5. Bring to a simmer and cook for 15 minutes, stirring occasionally.\\n6. Drain spaghetti and add to the sauce.\\n7. Toss to coat and serve.\\n\\n**User's Available Ingredients:**\\n\\n* 1 pound spaghetti\\n* 1 (28 ounce) can crushed tomatoes\\n* 2 cloves garlic\\n* 1/2 teaspoon salt\\n* 1/4 teaspoon black pepper\\n* 1 tablespoon butter\\n\\nI will then provide you with the modified recipe in the requested format. \\n\"}]},\"finishReason\":\"STOP\",\"safetyRatings\":[{\"category\":\"HARM_CATEGORY_HATE_SPEECH\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.12988281,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.16796875},{\"category\":\"HARM_CATEGORY_DANGEROUS_CONTENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.22265625,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.15234375},{\"category\":\"HARM_CATEGORY_HARASSMENT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.18261719,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.091308594},{\"category\":\"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\"probability\":\"NEGLIGIBLE\",\"probabilityScore\":0.22558594,\"severity\":\"HARM_SEVERITY_NEGLIGIBLE\",\"severityScore\":0.115722656}],\"citationMetadata\":{\"citations\":[{\"startIndex\":429,\"endIndex\":560,\"uri\":\"https://www.thefiwy.com/how-to-make-spinach-puffs-kronk-recipe/\"}]},\"avgLogprobs\":-0.14531766915623145,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":180,\"candidatesTokenCount\":316,\"totalTokenCount\":496,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":180}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":316}]},\"modelVersion\":\"gemini-1.5-flash-001\",\"createTime\":\"2025-04-02T18:22:01.646781Z\",\"responseId\":\"SYDtZ_28J4LB-O4PkZf2gA4\"},\"request\":{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"You are given an original recipe with ingredients and directions. Your task is to modify the recipe to fit the user's available ingredients while keeping the dish as close to the original as possible.\\n\\n                Original Recipe:\\n\\n                Title: \\n                Ingredients: \\n                Directions: \\n\\n                User's Available Ingredients: [object Object]\\n\\n                Requirements:\\n                - **Remove** ingredients that the user doesn't have, except for the basic ingredients such as oil or salt.\\n                - Suggest reasonable substitutions for missing ingredients.\\n                - Adjust the cooking steps accordingly.\\n                - Maintain the essence of the dish.\\n\\n                Output format:\\n                - title: string, the modified recipe's name\\n                - ingredients: string, List of new ingredients based on the user's available items\\n                - directions: string, Modified step-by-step instructions\"}]}],\"config\":{},\"tools\":[],\"output\":{}}}","genkit:state":"success"},"displayName":"generate","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"5f6b1058515c1e18":{"spanId":"5f6b1058515c1e18","traceId":"e8ead7cdf474109b9913d90b1b9b50ed","startTime":1743618117620,"endTime":1743618120376.9717,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"flow","genkit:name":"customRecipeFlow","genkit:isRoot":true,"genkit:path":"/{customRecipeFlow,t:flow}","genkit:metadata:context":"{}","genkit:input":"{\"suggestRecipe\":{\"title\":\"\",\"ingredients\":\"milk\",\"directions\":\"\",\"ingredient_embedding\":{}},\"ingredients\":\"\"}","genkit:state":"error"},"displayName":"customRecipeFlow","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"customImage is not defined"},"timeEvents":{"timeEvent":[{"time":1743618120376.9167,"annotation":{"attributes":{"exception.type":"ReferenceError","exception.message":"customImage is not defined","exception.stacktrace":"ReferenceError: customImage is not defined\n    at <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\src\\flow\\customRecipe.ts:118:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\flow.ts:124:14)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\action.ts:426:14)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\action.ts:322:26)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\tracing\\instrumentation.ts:73:16)\n    at async <anonymous> (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\tracing\\instrumentation.ts:115:24)\n    at async runInNewSpan (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\tracing\\instrumentation.ts:103:10)\n    at async newTrace (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\tracing\\instrumentation.ts:62:10)\n    at async AsyncFunction.actionFn.run (C:\\Users\\Mario Ananda Salim\\OneDrive\\Documents\\Coding\\Dart\\lab-flutter-basics-dart-genkit-recipe-app\\functions\\node_modules\\@genkit-ai\\core\\src\\action.ts:289:18)"},"description":"exception"}}]}}},"displayName":"customRecipeFlow","startTime":1743618117620,"endTime":1743618120376.9717}